---
source: src/rules/mod.rs
expression: output
---
Rule: PGM105
Severity: INFO
Description: Column uses serial/bigserial instead of identity column

PGM105 â€” Don't use `serial` / `bigserial`

What it detects:
A column declared as `serial`, `bigserial`, or `smallserial`.

Why it's worth noting:
The `serial` pseudo-types create an implicit sequence and set a
`nextval()` default, but the sequence is owned by the column in a
somewhat loose way. Dropping the column doesn't always drop the
sequence, permissions aren't inherited, and `pg_dump` may not
restore the relationship correctly in all edge cases.

Since PostgreSQL 10, identity columns (`GENERATED ALWAYS AS IDENTITY`
or `GENERATED BY DEFAULT AS IDENTITY`) provide the same
auto-incrementing behavior with tighter ownership, better
permission handling, and compliance with the SQL standard.

Example (flagged):
CREATE TABLE orders (id serial PRIMARY KEY);

Fix:
CREATE TABLE orders (
id bigint GENERATED ALWAYS AS IDENTITY PRIMARY KEY
);
