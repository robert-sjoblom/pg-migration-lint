---
source: tests/integration.rs
assertion_line: 413
expression: pgm018
---
- rule_id: PGM018
  severity: Critical
  message: "Adding CHECK constraint on existing table 'customers' without NOT VALID will scan the entire table while holding an ACCESS EXCLUSIVE lock. Use ADD CONSTRAINT ... NOT VALID, then VALIDATE CONSTRAINT in a separate statement."
  file: repos/all-rules/migrations/V005__new_violations.sql
  start_line: 7
  end_line: 10
